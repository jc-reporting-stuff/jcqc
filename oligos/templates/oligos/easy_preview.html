{% extends '_base.html' %}

{% block title %}Number of oligos to order{% endblock title %}


{% load crispy_forms_tags%}

{% block content %}

<div class="w-[800px] mx-auto">

    <h1 class="page-leader">Order new oligos - Bulk Ordering</h1>

    <div class="py-4 font-bold">Step 3 of 3: Verify Order</div>


    <form method="post" action="{% url 'oligos:easy_submit' %} ">
        {% csrf_token %}

        <div class="text-md italic mb-4">- - Using account {{ account.code }} - {{ account.comment }} - -</div>

        <table class="oligo-preview-table">
            <tr>
                <th>Name</th>
                <th>Sequence</th>
                <th>Length (bp)</th>
                <th>Scale</th>
                <th>Purity</th>
                <th>Modification</th>
            </tr>

            {% for oligo in oligos %}
            <tr style="align: text-center">
                <td>{{ oligo.name }} <input type="hidden" name="oligo-{{forloop.counter0}}-name" value="{{oligo.name}}"></td>
                <td>{{ oligo.sequence }} <input type="hidden" name="oligo-{{forloop.counter0}}-sequence" value="{{oligo.sequence}}"></td>
                <td>{{ oligo.sequence|length}}</td>
                <td>{{ data.scale }}</td>
                <td>{{ data.purity }}</td>
                <td>{% if data.modification %}{{ data.modification }}{% else %} - - {% endif %}</td>
            </tr>
            {% endfor %}

            <input type="hidden" name="scale" value="{{ data.scale }}">
            <input type="hidden" name="purity" value="{{ data.purity }}">
            <input type="hidden" name="modification" value="{{ data.modification }}">
            <input type="hidden" name="account_id" value="{{ account.id }}">
            <input type="hidden" name="oligo_count" value="{{ oligos|length }}">
        </table>

        <input type="submit" value="Place Order" class="border border-gray-300 rounded py-1 px-3 my-4 ml-16">
        <div class="mt-8 inline ml-16"><a class="underline" href="javascript:history.back()">Go back</a> to make changes.</div>

    </form>

</div>


{% endblock content %}